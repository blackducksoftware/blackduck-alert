---
apiVersion: v1
data:
  {{- if not .Values.rabbitmq.isExternal }}
  ALERT_RABBIT_MQ_HOST: alert-rabbitmq
  {{- else }}
  ALERT_RABBIT_MQ_HOST: {{ required "must provide --set rabbitmq.host=\"\"" .Values.rabbitmq.host }}
  {{- end }}
  ALERT_RABBIT_MQ_PORT: {{ required "must provide --set rabbitmq.port=\"\"" .Values.rabbitmq.port | quote }}
  {{- if not .Values.rabbitmq.credential.secretName }}
  ALERT_RABBIT_USER: sysadmin
  ALERT_RABBIT_PASSWORD: blackduck
  {{- end }}
  ALERT_RABBIT_VHOST: {{ required "must provide --set rabbitmq.virtualHost=\"\"" .Values.rabbitmq.virtualHost}}
kind: ConfigMap
metadata:
  labels:
    app: alert
    component: rabbitmq
    name: {{ .Release.Name }}
  name: {{ .Release.Name }}-rabbitmq-config
  namespace: {{ .Release.Namespace }}
