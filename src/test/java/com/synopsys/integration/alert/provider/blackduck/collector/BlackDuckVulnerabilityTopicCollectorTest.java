package com.synopsys.integration.alert.provider.blackduck.collector;

import java.io.File;
import java.sql.Date;
import java.time.Instant;

import org.apache.commons.io.FileUtils;
import org.junit.Test;
import org.mockito.Mockito;
import org.springframework.core.io.ClassPathResource;

import com.synopsys.integration.alert.database.entity.NotificationContent;
import com.synopsys.integration.alert.provider.blackduck.BlackDuckProvider;
import com.synopsys.integration.alert.provider.blackduck.tasks.BlackDuckAccumulator;
import com.synopsys.integration.blackduck.api.generated.enumeration.NotificationType;

public class BlackDuckVulnerabilityTopicCollectorTest {

    @Test
    public void testCollectingVulnerability() throws Exception {

        final BlackDuckProvider provider = new BlackDuckProvider(Mockito.mock(BlackDuckAccumulator.class));

        final ClassPathResource classPathResource = new ClassPathResource("json/vulnerabilityTest.json");
        final File jsonFile = classPathResource.getFile();
        final String notificationContent = FileUtils.readFileToString(jsonFile);

        final NotificationContent notification = new NotificationContent(Date.from(Instant.now()), BlackDuckProvider.COMPONENT_NAME, NotificationType.VULNERABILITY.name(), notificationContent);

    }
}
